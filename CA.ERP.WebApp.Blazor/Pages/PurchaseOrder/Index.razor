@page "/purchase-order/"

@using CA.ERP.WebApp.Dto.PurchaseOrder;



<MudContainer>




    <MudTable ServerData="@(new Func<TableState, Task<TableData<PurchaseOrderView>>>(ServerReload))"  Hover="true"  Striped="true" @ref="table">
        <ToolBarContent>
            <MudText Typo="Typo.h6">Purchase Orders</MudText>
            <MudToolBarSpacer />
            <MudTextField @bind-Value="PoNumber" AdornmentIcon="@Icons.Material.Filled.Search" Adornment="Adornment.Start" Placeholder="P.O. Number" Class="ml-4" ></MudTextField>
            <MudDatePicker @bind-Value="Date" Adornment="Adornment.Start" Class="ml-4"></MudDatePicker>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>P.O. #</MudTh>
            <MudTh>Delivery Date</MudTh>
            <MudTh>Supplier</MudTh>
            <MudTh>Branch</MudTh>
            <MudTh>Actions</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="PO">@context.Barcode</MudTd>
            <MudTd DataLabel="Delivery Date">@context.DeliveryDate.ToShortDateString()</MudTd>
            <MudTd DataLabel="Supplier">@context.SupplierName</MudTd>
            <MudTd DataLabel="Branch">@context.BranchName</MudTd>
            <MudTd DataLabel="Action"></MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager  />
        </PagerContent>
    </MudTable>

</MudContainer>


@code{
    private MudTable<PurchaseOrderView> table;


    public string PoNumber { get; set; }
    public DateTime Date { get; set; } = DateTime.Now;

    public IEnumerable<PurchaseOrderView> PurchaseOrders { get; set; } = new List<PurchaseOrderView>();

    private async Task<TableData<PurchaseOrderView>> ServerReload(TableState state)
    {

        return new TableData<PurchaseOrderView>() { TotalItems = 0, Items = new List<PurchaseOrderView>() { new PurchaseOrderView() } };
    }


}
